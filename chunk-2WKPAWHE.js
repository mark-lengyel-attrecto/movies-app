import{a as V,b as h,c as q,d as B,e as O,f as I,g as M,h as U,i as D,j as G,k as Q,l as j}from"./chunk-ZKMKILFE.js";import{f as N}from"./chunk-SWAEJGHT.js";import{i as T}from"./chunk-BH7X5VPK.js";import{Ba as o,Ca as c,Ja as E,Pa as d,bb as u,da as v,db as b,ea as C,eb as r,ib as s,jb as l,kb as g,lb as w,mb as F,nb as f,ob as x,pb as S,qb as y,sb as a,tb as L,wb as _}from"./chunk-KI75AEYF.js";var R=["loginFormElement"],P=e=>({"is-invalid":e});function A(e,m){e&1&&a(0," Username is invalid! ")}function H(e,m){e&1&&a(0," Username is required! ")}function k(e,m){if(e&1&&(s(0,"div",5),d(1,A,1,0)(2,H,1,0),l()),e&2){let i=f();o(),r(i.hasError("username","email")?1:-1),o(),r(i.hasError("username","required")?2:-1)}}function z(e,m){e&1&&a(0," Password is invalid! ")}function J(e,m){e&1&&a(0," Password is required! ")}function K(e,m){if(e&1&&(s(0,"div",5),d(1,z,1,0)(2,J,1,0),l()),e&2){let i=f();o(),r(i.hasError("password","pattern")?1:-1),o(),r(i.hasError("password","required")?2:-1)}}function W(e,m){e&1&&g(0,"span",9)}function X(e,m){if(e&1&&(s(0,"div",10),a(1),l()),e&2){let i=f();o(),L(i.error)}}var oe=(()=>{class e{constructor(i,n,t){this.formBuilder=i,this.router=n,this.authenticationService=t,this.hostClasses="overflow-auto flex-grow-1",this.loginFormElement=new O([],[]),this.loading=!1,this.returnUrl="/home",this.error=""}ngOnInit(){this.loginForm=this.formBuilder.group({username:["",h.required],password:["",h.required]})}hasError(i,n=null){return n!=null?this.loginForm.get(i)?.hasError(n)||!1:this.loginForm.get(i)?.invalid||!1}isErrorOutputEnabled(i){return this.loginFormElement?this.hasError(i)&&this.loginFormElement.submitted:!1}onSubmit(){this.loginForm.invalid||(this.loading=!0,this.authenticationService.login(this.loginForm.get("username")?.value,this.loginForm.get("password")?.value).subscribe({next:()=>{this.router.navigate([this.returnUrl])},error:i=>{this.loading=!1,this.error=i.message}}))}static{this.\u0275fac=function(n){return new(n||e)(c(D),c(N),c(j))}}static{this.\u0275cmp=E({type:e,selectors:[["app-login"]],viewQuery:function(n,t){if(n&1&&x(R,7),n&2){let p;S(p=y())&&(t.loginFormElement=p.first)}},hostVars:2,hostBindings:function(n,t){n&2&&b(t.hostClasses)},decls:15,vars:12,consts:[["loginFormElement","ngForm"],[1,"container","rounded","bg-body-tertiary","shadow-lg","overflow-hidden","w-25","mt-5","p-3"],[3,"ngSubmit","formGroup"],["for","username"],["id","username","formControlName","username",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["for","password",1,"mt-3"],["id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary","mt-3",3,"disabled"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"alert","alert-danger","mb-0","mt-3"]],template:function(n,t){if(n&1){let p=w();s(0,"div",1)(1,"form",2,0),F("ngSubmit",function(){return v(p),C(t.onSubmit())}),s(3,"label",3),a(4,"Username"),l(),g(5,"input",4),d(6,k,3,2,"div",5),s(7,"label",6),a(8,"Password"),l(),g(9,"input",7),d(10,K,3,2,"div",5),s(11,"button",8),d(12,W,1,0,"span",9),a(13," Login "),l(),d(14,X,2,1,"div",10),l()()}n&2&&(o(),u("formGroup",t.loginForm),o(4),u("ngClass",_(8,P,t.isErrorOutputEnabled("username"))),o(),r(t.isErrorOutputEnabled("username")?6:-1),o(3),u("ngClass",_(10,P,t.isErrorOutputEnabled("password"))),o(),r(t.isErrorOutputEnabled("password")?10:-1),o(),u("disabled",t.loading),o(),r(t.loading?12:-1),o(2),r(t.error?14:-1))},dependencies:[G,I,V,q,B,Q,M,U,T],encapsulation:2})}}return e})();export{oe as LoginComponent};
